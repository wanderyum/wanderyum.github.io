<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>msys2配置</title>
	<link rel="stylesheet" type="text/css" href="css/native.css">
	</head>
<body>
<h1>msys2配置</h1>

<p>这里假设你已经成功安装<a href="https://www.msys2.org/">msys2</a>, 并且安装目录为<code>$directory</code>, 比如说长这个样子: <code>C:\ProgramFiles\msys64</code>。</p>

<h3>改变软件源</h3>

<p>安装好msys后的第一件事是改变软件源, 否则直接连官方服务器速度感人。这里推荐中国科学技术大学的软件源(ustc)。</p>

<ul>
<li>用记事本打开<code>$directory\etc\pacman.d\mirrorlist.msys</code>, 把ustc源加到第一行:</li>
</ul>

<div class="codehilite"><pre><span></span><code>## Primary
## msys2.org
Server = http://mirrors.ustc.edu.cn/msys2/msys/$arch/
Server = http://repo.msys2.org/msys/$arch
Server = https://downloads.sourceforge.net/project/msys2/REPOS/MSYS2/$arch
Server = http://www2.futureware.at/~nickoe/msys2-mirror/msys/$arch/
</code></pre></div>

<ul>
<li>用记事本打开<code>$directory\etc\pacman.d\mirrorlist.mingw32</code>, 把ustc源加到第一行:</li>
</ul>

<div class="codehilite"><pre><span></span><code>## Primary
## msys2.org
Server = http://mirrors.ustc.edu.cn/msys2/mingw/i686/
Server = http://repo.msys2.org/mingw/i686
Server = https://downloads.sourceforge.net/project/msys2/REPOS/MINGW/i686
Server = http://www2.futureware.at/~nickoe/msys2-mirror/mingw/i686
</code></pre></div>

<ul>
<li>用记事本打开<code>$directory\etc\pacman.d\mirrorlist.mingw64</code>, 把ustc源加到第一行:</li>
</ul>

<div class="codehilite"><pre><span></span><code>## Primary
## msys2.org
Server = http://mirrors.ustc.edu.cn/msys2/mingw/x86_64
Server = http://repo.msys2.org/mingw/x86_64
Server = https://downloads.sourceforge.net/project/msys2/REPOS/MINGW/x86_64
Server = http://www2.futureware.at/~nickoe/msys2-mirror/mingw/x86_64
</code></pre></div>

<h3>用pacman更新系统以及安装软件</h3>

<p>msys2用pacman管理软件, 和archlinux是一样的。pacman常用命令:</p>

<div class="codehilite"><pre><span></span><code>pacman -Syu       <span class="c1"># 同步软件库并更新系统到最新状态 </span>
pacman -Ss vim    <span class="c1"># 搜索软件仓库里名字含有vim的软件包</span>
pacman -S git     <span class="c1"># 安装git</span>
pacman -R git     <span class="c1"># 删除git</span>
</code></pre></div>

<h3>添加右键命令"msys here"</h3>

<p>以windows 10为例。</p>

<p>1 找到msys2的安装目录<code>$directory</code>, 新建<code>msys2.bat</code>, 内容如下(将<code>$directory</code>换成自己的路径):</p>

<div class="codehilite"><pre><span></span><code>$directory\msys2_shell.cmd -mingw64 -where %cd%
</code></pre></div>

<p>2 <code>Win + r</code>启动regedit, 进入<code>HKEY_CLASSES_ROOT\Directory\Background\shell</code>, 新建<strong>项</strong>, 命名为<code>msys2</code>(和cmd、Powershell同一等级)。</p>

<p>3 右键msys2, 再新建<strong>项</strong>, 命名为<code>command</code>。选中新建的<code>command</code>, 更改右边窗口的值为<code>$directory\msys2.bat</code></p>

<p>4 右键msys2, 新建<strong>字符串</strong>, 名称为icon, 值为<code>$directory\msys2.ico</code></p>

<p>在这个过程中, <code>msys2</code>项使系统识别了在右键菜单中要添加名为<code>msys2</code>的选项, <code>command</code>项添加指出关联的程序位置, <code>icon</code>字符串指向要用的图标地址。</p>

<p>参考文章:</p>

<p><a href="https://blog.csdn.net/liyuanbhu/article/details/56496501">给 MSYS2 添加中科大的源</a></p>

<p><a href="https://www.2cto.com/kf/201704/620094.html">pacman常用命令</a></p>

<p><a href="https://blog.csdn.net/u011924787/article/details/69485944">为msys2添加右键，在当前目录打开</a></p>

</body>
</html>